@{
    ViewBag.Title = EmployeesRes.EmployeesStrings.CreateEmployee;
    ViewBag.Controller = "Employees";
    ViewBag.Action = "Employees.Create";
}

@model DiagnosticCenter.Models.Employee
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        
        $("#Dept").change(function () {
            var url = '@Url.Content("~/")' + "Employees/Cabinet";
            var ddlsource = "#Dept";
            var ddltarget = "#Cab";
            
            
            $.getJSON(url, { deptName: $(ddlsource).val() }, function (data) {
                $(ddltarget).empty();
                $.each(data, function (index, optionData) {
                    $(ddltarget).append("<option value='" + optionData.Value + "'>" + optionData.Text + "</option>");
                });

            });

        });
        $("#Dept").change(function () {
            var source = "#Dept";
            if ($(source).val() == "0" || $("#Cab").val() == "0") { $("#sub").attr("disabled", "disabled"); }
            else
                $("#sub").attr("disabled", "");
        });
        
        $("#position").change(function () {
            var source = "#position";
            if ($(source).val() == "" || $("#Cab").val() == "0") { $("#sub").attr("disabled", "disabled"); }
            else 
                 $("#sub").attr("disabled", "");
        });

        $("#Cab").change(function () {
            var source = "#Cab";
            if ($(source).val() == "0" || $("#position").val() == "") { $("#sub").attr("disabled", "disabled"); }
            else $("#sub").attr("disabled", "");
        });
    });
  </script>

<div id="icon-empl-general" class="icon32"><br /></div><h2>@EmployeesRes.EmployeesStrings.CreateEmployee</h2>
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Name)
            <br />
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Surname)
            <br />
            @Html.EditorFor(model => model.Surname)
            @Html.ValidationMessageFor(model => model.Surname)
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Patronymic)
            <br />
            @Html.EditorFor(model => model.Patronymic)
            @Html.ValidationMessageFor(model => model.Patronymic)
        </div>
        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Category)
            <br />
            @Html.EditorFor(model => model.Category)
            @Html.ValidationMessageFor(model => model.Category)
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Specialty)
            <br />
            @Html.EditorFor(model => model.Specialty)
            @Html.ValidationMessageFor(model => model.Specialty)
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Position)
            <br />
            <select name = "position" id="position">
                <option value = "">@EmployeesRes.EmployeesStrings.ChoosePosition</option>
                <option value = "зав. відділом">@EmployeesRes.EmployeesStrings.departmentchief</option>
                <option value = "головний лікар">@EmployeesRes.EmployeesStrings.headdoctor</option>
                <option value = "лікар">@EmployeesRes.EmployeesStrings.doctor</option>
                <option value = "головна медсестра">@EmployeesRes.EmployeesStrings.headnurse</option>
                <option value = "медсестра">@EmployeesRes.EmployeesStrings.nurse</option>
                <option value = "реєстратура">@EmployeesRes.EmployeesStrings.registar</option>
             </select>
                    
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Rate)
            <br />
            @Html.EditorFor(model => model.Rate)
            @Html.ValidationMessageFor(model => model.Rate)
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Department)
            <br />
            @Html.DropDownList("Dept")          
        </div>

        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Cabinet)
            <br />
            @Html.DropDownList("Cab")
        </div>
        
        <div class="editor-label">
            @Html.Label(EmployeesRes.EmployeesStrings.Nickname)
            <br />
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>
        <div class="editor-label">
            @Html.Label(PatientsRes.PatientsStrings.Email)
            <br />
            @Html.EditorFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)

        </div>
        <br />
        <p>
            <input type="submit" value="@PatientsRes.PatientsStrings.ButtonOk" disabled="disabled" name="sub" id="sub" class="yt-uix-button"/>
        </p>

}
